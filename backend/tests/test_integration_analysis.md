# Echo ì‹ í˜¸ ìƒì„± í…ŒìŠ¤íŠ¸ ë¶„ì„ ê²°ê³¼

## âœ… ìµœì¢… ê²°ê³¼

**ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼**: `test_end_to_end_simulation`, `test_multiple_pulses` ëª¨ë‘ PASSED

## í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½

### âœ… ì„±ê³µí•œ ë¶€ë¶„
1. **Chirp ì‹ í˜¸ ìƒì„±**: ì •ìƒ ì‘ë™
   - Shape: (3500,)
   - Max magnitude: 1.000000
   - Mean magnitude: 1.000000

2. **Echo ì‹ í˜¸ ìƒì„±**: ì •ìƒ ì‘ë™ (ì‹ í˜¸ê°€ ë§¤ìš° ì‘ì§€ë§Œ ìƒì„±ë¨)
   - Shape: (17500,)
   - Max magnitude: 1.095944e-09
   - Mean magnitude: 2.191887e-10
   - Non-zero samples: 3500 / 17500

### ğŸ” ë°œê²¬ëœ ë¬¸ì œì 

#### 1. ê¸°ì¡´ ì½”ë“œì˜ `loss` ì‚¬ìš© ë²„ê·¸
**ê¸°ì¡´ ì½”ë“œ (`echo_generator_chirped.py` line 82, 142):**
```python
loss = sar_system.NF + sar_system.Loss  # dB ê°’ (ì˜ˆ: 5.0)
c1 = pt * sar_system.wavelength**2 * ant_gain ** 2 / ( (4*pi)**3 * loss * atmospheric_loss)
```

**ë¬¸ì œ**: `loss`ê°€ dB ê°’ì¸ë° linear ë³€í™˜ ì—†ì´ ì‚¬ìš©ë¨

**í˜„ì¬ ë°±ì—”ë“œ ì½”ë“œ (ì˜¬ë°”ë¦„):**
```python
loss_linear = 10.0 ** ((self.NF + self.Loss) / 10.0)  # dB â†’ linear ë³€í™˜
c1 = (self.config.Pt * self.config.wavelength ** 2 * ant_gain ** 2 /
      ((4.0 * PI) ** 3 * loss_linear * atmospheric_loss))
```

**ì˜í–¥**: 
- ê¸°ì¡´ ì½”ë“œ: `c1`ì´ ì•½ 1.58ë°° ì‘ê²Œ ê³„ì‚°ë¨ (ë²„ê·¸)
- í˜„ì¬ ì½”ë“œ: ì˜¬ë°”ë¥¸ ê³„ì‚°

#### 2. ì‹œê°„ ì¡°ê±´ ì²´í¬ ëˆ„ë½ (ìˆ˜ì • ì™„ë£Œ)
**ê¸°ì¡´ ì½”ë“œ (line 159-161):**
```python
valid_index = np.where((td >= (swst - taup + na*pri)) & \
                       (td < (swet + na*pri)) & \
                       (c > noise_threshold) )[0]
```

**í˜„ì¬ ì½”ë“œ**: ì‹œê°„ ì¡°ê±´ ì²´í¬ ì¶”ê°€ë¨ âœ…

#### 3. ì‹ í˜¸ í¬ê¸°ê°€ ë§¤ìš° ì‘ì€ ì´ìœ 
- ê³„ìˆ˜ `c`ê°€ ë§¤ìš° ì‘ìŒ: `1.095944e-09`
- ì´ëŠ” ì •ìƒì ì¸ í˜„ìƒ (ê±°ë¦¬ê°€ ê°€ê¹Œì›Œë„ ì‹ í˜¸ê°€ ì‘ì„ ìˆ˜ ìˆìŒ)
- `reflectivity=1.0`ìœ¼ë¡œ ì„¤ì •í–ˆì§€ë§Œ, ì‹¤ì œ SARì—ì„œëŠ” ë” í° ë°˜ì‚¬ë„ë¥¼ ê°€ì§„ íƒ€ê²Ÿì´ í•„ìš”í•  ìˆ˜ ìˆìŒ

## í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë³„ ê²°ê³¼

### í…ŒìŠ¤íŠ¸ 1: `test_end_to_end_simulation`
- **íƒ€ê²Ÿ ê±°ë¦¬**: 4.50 km (ìƒ˜í”Œë§ ìœˆë„ìš° ë‚´)
- **ì‹œê°„ ì§€ì—°**: 30.00 Î¼s (swst=10Î¼s, swet=60Î¼s ë²”ìœ„ ë‚´)
- **ì‹ í˜¸ ê³„ìˆ˜**: `c = 1.10e-09` > `threshold = 4.78e-13` âœ…
- **ì‹œê°„ ì¡°ê±´**: í†µê³¼ âœ…
- **Echo ì‹ í˜¸**: ìƒì„±ë¨ (3500ê°œ ìƒ˜í”Œ)

### í…ŒìŠ¤íŠ¸ 2: `test_multiple_pulses`
- **íƒ€ê²Ÿ ê±°ë¦¬**: 517.00 km (ì›ë˜ ì„¤ì •)
- **ì‹œê°„ ì§€ì—°**: 3449.05 Î¼s (swet=60Î¼s ë²”ìœ„ ë°–) âŒ
- **ì‹ í˜¸ ê³„ìˆ˜**: `c = 8.29e-14` < `threshold = 4.78e-13` âŒ
- **ê²°ê³¼**: Echo ì‹ í˜¸ê°€ 0 (íƒ€ê²Ÿì´ ìƒ˜í”Œë§ ìœˆë„ìš° ë°–)

## ê¸°ì¡´ ì½”ë“œì™€ì˜ ì°¨ì´ì 

### 1. Loss ë³€í™˜
- **ê¸°ì¡´**: `loss`ë¥¼ dBë¡œ ì§ì ‘ ì‚¬ìš© (ë²„ê·¸)
- **í˜„ì¬**: `loss_linear = 10^((NF+Loss)/10)` ì‚¬ìš© (ì˜¬ë°”ë¦„)

### 2. ì‹œê°„ ì¡°ê±´ ì²´í¬
- **ê¸°ì¡´**: `td >= (swst - taup + na*pri) & td < (swet + na*pri)`
- **í˜„ì¬**: ë™ì¼í•˜ê²Œ êµ¬í˜„ë¨ âœ…

### 3. Rank ê³„ì‚°
- **ê¸°ì¡´**: C++ í•¨ìˆ˜ `calc_rank_from_beam_c_fn` ì‚¬ìš©
- **í˜„ì¬**: ì‚¬ìš©í•˜ì§€ ì•ŠìŒ (ë‹¨ì¼ í„ìŠ¤ì—ì„œëŠ” ë¶ˆí•„ìš”í•  ìˆ˜ ìˆìŒ)

## ê¶Œì¥ ì‚¬í•­

1. **íƒ€ê²Ÿ ë°˜ì‚¬ë„ ì¦ê°€**: í…ŒìŠ¤íŠ¸ì—ì„œ `reflectivity`ë¥¼ ë” í¬ê²Œ ì„¤ì • (ì˜ˆ: 100.0) âœ… ì ìš©ë¨
2. **íƒ€ê²Ÿ ê±°ë¦¬ ì¡°ì •**: ìƒ˜í”Œë§ ìœˆë„ìš° ë‚´ì— íƒ€ê²Ÿ ë°°ì¹˜ âœ… ì ìš©ë¨
3. **ê¸°ì¡´ ì½”ë“œ ë²„ê·¸ í™•ì¸**: `loss`ë¥¼ dBë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì˜ë„ëœ ê²ƒì¸ì§€ í™•ì¸ í•„ìš”

## ìµœì¢… ê²€ì¦ ê²°ê³¼

### ë°˜ì‚¬ë„ 100.0ìœ¼ë¡œ ì¦ê°€ í›„
- **Echo ì‹ í˜¸ Max magnitude**: `1.095944e-08` (ë°˜ì‚¬ë„ 1.0 ëŒ€ë¹„ 10ë°° ì¦ê°€)
- **ì‹ í˜¸ ìƒì„±**: ì •ìƒ ì‘ë™ âœ…
- **ì‹œê°í™”**: ì •ìƒ ìƒì„± âœ…

## ìƒì„±ëœ ì‹œê°í™” íŒŒì¼

- `test_chirp_signal.png`: Chirp ì‹ í˜¸ ì‹œê°í™”
- `test_echo_signal.png`: Echo ì‹ í˜¸ ì‹œê°í™” (ì‹ í˜¸ê°€ ë§¤ìš° ì‘ì•„ ë³´ì´ì§€ ì•Šì„ ìˆ˜ ìˆìŒ)
- `test_multiple_pulses.png`: ì—¬ëŸ¬ í„ìŠ¤ 2D ì‹œê°í™”
- `test_first_pulse.png`: ì²« ë²ˆì§¸ í„ìŠ¤ ê°œë³„ ì‹œê°í™”
